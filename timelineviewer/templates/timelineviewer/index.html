{% extends "timelineviewer/base.html" %}

{% load staticfiles %}

{% block content %}
<div id="frame">
	<div id="header">
		<h1><span id="retelling">RETELLING</span>TIME</h1>
	</div>
	
	<div id="functionality">
		<div id="timelines"></div>

		<div id="timeline-adder">
			<div>
				<span class="instructions">Search for a timeline:</span>
				<input id="query" type="text" />
			</div>

			<div id="options">
				<div id="highlighted-timelines">
					<h2 class="instructions option-instructions">Select a featured timeline:</h2>
					{% for t in highlighted_timelines %}
					<span class="option">
						<a href="#" id="t-{{ t.id }}">{{ t.short_title.split|join:"&nbsp;" }}</a>
					</span>
					{% endfor %}
				</div>
				<div id="all-timelines">
					<h2 class="instructions option-instructions">All timelines:</h2>
					{% for t in timelines %}
					<span class="option">
						<a href="#" id="t-{{ t.id }}">{{ t.short_title.split|join:"&nbsp;" }}</a>
					</span>
					{% endfor %}
				</div>
				<span id="customoption" class="hidden">
					<a href="#">(Parse&nbsp;the&nbsp;Wikipedia&nbsp;page&nbsp;titled:&nbsp;<span id="query-text"></span>)</a>
				</span>
			</div>
		</div>

		<svg id="invisible-renderer" height="0" width="0">
			<foreignobject height="1" width="1">
				<div id="invisible-events-holder"></div>
			</foreignobject>
		</svg>
	</div>

	<div id="apology-message" class="hidden">
		<p>We're really sorry, but this just isn't going to work.</p>

		<p class="details">You could try <a href="http://www.mozilla.org/en-US/firefox/new/">Firefox</a> or <a href="http://google.com/chrome/">Chrome</a>.</p>

		<p class="details">What's going on here?</p>
	</div>

	<script type="text/javascript"
		data-main="{% static 'timelineviewer/js/viewer.js' %}"
		src="{% static 'timelineviewer/js/require.js' %}"></script>

	<script type="text/template" id="event-template">
		<div class="event-text"><span class="date"><%= date_string %></span> <%= content %></div>
	</script>

	<script type="text/template" id="header-template">
		<div class="left">
			<h2><%= short_title %></h2>
			<a href="<%= url %>">(original page)</a>
		</div>
		<div class="right">
			<a href="#" id="set-focus-link"><span id="inactive">set focus</span><span id="active">remove focus</span></a>
			|
			<a href="#" id="remove-link">remove</a>
		</div>
		<div class="clear"></div>
	</script>
</div>
{% endblock %}